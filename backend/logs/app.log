2025-03-18 15:27:20,368 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:33:06,966 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:33:06,981 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.1.2:5001
2025-03-18 15:33:06,982 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-18 15:33:06,983 - werkzeug - INFO -  * Restarting with stat
2025-03-18 15:33:07,117 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:33:07,119 - werkzeug - WARNING -  * Debugger is active!
2025-03-18 15:33:07,130 - werkzeug - INFO -  * Debugger PIN: 982-295-925
2025-03-18 15:33:10,799 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:33:10] "[33mGET / HTTP/1.1[0m" 404 -
2025-03-18 15:33:11,541 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:33:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-03-18 15:39:29,654 - werkzeug - INFO -  * Detected change in '/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/app.py', reloading
2025-03-18 15:39:29,774 - werkzeug - INFO -  * Restarting with stat
2025-03-18 15:39:30,102 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:39:30,106 - werkzeug - WARNING -  * Debugger is active!
2025-03-18 15:39:30,113 - werkzeug - INFO -  * Debugger PIN: 982-295-925
2025-03-18 15:40:21,239 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:40:21] "GET /api/health HTTP/1.1" 200 -
2025-03-18 15:40:23,494 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:40:23] "GET /api/health HTTP/1.1" 200 -
2025-03-18 15:40:32,688 - __main__ - INFO - Received file upload request
2025-03-18 15:40:32,733 - __main__ - INFO - File saved to /Users/clovisvinant/Central/Projects/scifi/xenarch/uploads/af92256b-7583-457f-8fd7-f61c84bb4f85/at3_1m4_01.tif
2025-03-18 15:40:32,733 - __main__ - INFO - Running command: python /Users/clovisvinant/Central/Projects/scifi/xenarch/main.py complete -i /Users/clovisvinant/Central/Projects/scifi/xenarch/uploads/af92256b-7583-457f-8fd7-f61c84bb4f85/at3_1m4_01.tif -o /Users/clovisvinant/Central/Projects/scifi/xenarch/analysis_results/af92256b-7583-457f-8fd7-f61c84bb4f85 --grid-size 512 --overlap 64 --fd-min 0.0 --fd-max 0.8 --r2-min 0.8 --max-samples 16 --cpu-fraction 0.8 --plot-output /Users/clovisvinant/Central/Projects/scifi/xenarch/analysis_results/af92256b-7583-457f-8fd7-f61c84bb4f85 -v
2025-03-18 15:40:52,271 - __main__ - ERROR - Error running command: 2025-03-18 15:40:44,654 - root - INFO - Starting terrain splitting...
2025-03-18 15:40:44,654 - xenarch_mk2.utils.splitter - INFO - Using 6 CPU cores
2025-03-18 15:40:44,655 - rasterio.env - DEBUG - Entering env context: <rasterio.env.Env object at 0x10a0b49d0>
2025-03-18 15:40:44,655 - rasterio.env - DEBUG - Starting outermost env
2025-03-18 15:40:44,655 - rasterio.env - DEBUG - No GDAL environment exists
2025-03-18 15:40:44,655 - rasterio.env - DEBUG - New GDAL environment <rasterio._env.GDALEnv object at 0x10b9afc70> created
2025-03-18 15:40:44,670 - rasterio._filepath - DEBUG - Installing FilePath filesystem handler plugin...
2025-03-18 15:40:44,671 - rasterio._env - DEBUG - GDAL data found in package: path='/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/rasterio/gdal_data'.
2025-03-18 15:40:44,671 - rasterio._env - DEBUG - PROJ data found in package: path='/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/rasterio/proj_data'.
2025-03-18 15:40:44,671 - rasterio._env - DEBUG - Started GDALEnv: self=<rasterio._env.GDALEnv object at 0x10b9afc70>.
2025-03-18 15:40:44,671 - rasterio.env - DEBUG - Entered env context: <rasterio.env.Env object at 0x10a0b49d0>
2025-03-18 15:40:44,671 - rasterio._base - DEBUG - Sharing flag: 0
/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/rasterio/__init__.py:356: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  dataset = DatasetReader(path, driver=driver, sharing=sharing, **kwargs)
2025-03-18 15:40:44,674 - rasterio._base - DEBUG - Nodata success: 0, Nodata value: 0.000000
2025-03-18 15:40:44,674 - rasterio._base - DEBUG - Dataset <open DatasetReader name='/Users/clovisvinant/Central/Projects/scifi/xenarch/uploads/af92256b-7583-457f-8fd7-f61c84bb4f85/at3_1m4_01.tif' mode='r'> is started.
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - Exiting env context: <rasterio.env.Env object at 0x10a0b49d0>
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - Cleared existing <rasterio._env.GDALEnv object at 0x10b9afc70> options
2025-03-18 15:40:44,675 - rasterio._env - DEBUG - Stopped GDALEnv <rasterio._env.GDALEnv object at 0x10b9afc70>.
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - Exiting outermost env
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - Exited env context: <rasterio.env.Env object at 0x10a0b49d0>
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - Entering env context: <rasterio.env.Env object at 0x10b99b690>
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - Starting outermost env
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - No GDAL environment exists
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - New GDAL environment <rasterio._env.GDALEnv object at 0x10b9afc70> created
2025-03-18 15:40:44,675 - rasterio._env - DEBUG - GDAL data found in package: path='/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/rasterio/gdal_data'.
2025-03-18 15:40:44,675 - rasterio._env - DEBUG - PROJ data found in package: path='/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/rasterio/proj_data'.
2025-03-18 15:40:44,675 - rasterio._env - DEBUG - Started GDALEnv: self=<rasterio._env.GDALEnv object at 0x10b9afc70>.
2025-03-18 15:40:44,675 - rasterio.env - DEBUG - Entered env context: <rasterio.env.Env object at 0x10b99b690>
2025-03-18 15:40:44,675 - xenarch_mk2.utils.splitter - DEBUG - Input image dimensions: 640x480
2025-03-18 15:40:44,675 - xenarch_mk2.utils.splitter - INFO - Adjusting grid size from 512 to 480
2025-03-18 15:40:44,675 - xenarch_mk2.utils.splitter - INFO - Processing 1 grids using 6 workers

Splitting terrain:   0%|          | 0/1 [00:00<?, ?grid/s]/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/rasterio/__init__.py:356: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  dataset = DatasetReader(path, driver=driver, sharing=sharing, **kwargs)
/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/rasterio/__init__.py:366: NotGeoreferencedWarning: The given matrix is equal to Affine.identity or its flipped counterpart. GDAL may ignore this matrix and save no geotransform without raising an error. This behavior is somewhat driver-specific.
  dataset = writer(

Splitting terrain: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00,  2.72grid/s]
Splitting terrain: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00,  2.71grid/s]
2025-03-18 15:40:45,103 - xenarch_mk2.utils.splitter - INFO - Processing complete. Total grids saved: 1
2025-03-18 15:40:45,103 - rasterio.env - DEBUG - Exiting env context: <rasterio.env.Env object at 0x10b99b690>
2025-03-18 15:40:45,104 - rasterio.env - DEBUG - Cleared existing <rasterio._env.GDALEnv object at 0x10b9afc70> options
2025-03-18 15:40:45,104 - rasterio._env - DEBUG - Stopped GDALEnv <rasterio._env.GDALEnv object at 0x10b9afc70>.
2025-03-18 15:40:45,104 - rasterio.env - DEBUG - Exiting outermost env
2025-03-18 15:40:45,104 - rasterio.env - DEBUG - Exited env context: <rasterio.env.Env object at 0x10b99b690>
2025-03-18 15:40:45,104 - root - INFO - Generating metrics...
2025-03-18 15:40:45,104 - xenarch_mk2.metrics.generator - INFO - Processing 1 files using 6 workers

Generating metrics:   0%|          | 0/1 [00:00<?, ?file/s]
Generating metrics: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00,  3.45file/s]
Generating metrics: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00,  3.45file/s]
2025-03-18 15:40:45,433 - xenarch_mk2.metrics.generator - INFO - Processing complete. Successfully processed: 1/1
2025-03-18 15:40:45,433 - root - INFO - Analyzing results...
2025-03-18 15:40:46,123 - matplotlib - DEBUG - matplotlib data path: /Users/clovisvinant/Central/Projects/scifi/xenarch/backend/xenarchapp/lib/python3.11/site-packages/matplotlib/mpl-data
2025-03-18 15:40:46,132 - matplotlib - DEBUG - CONFIGDIR=/Users/clovisvinant/.matplotlib
2025-03-18 15:40:46,133 - matplotlib - DEBUG - interactive is False
2025-03-18 15:40:46,133 - matplotlib - DEBUG - platform is darwin
2025-03-18 15:40:46,172 - matplotlib - DEBUG - CACHEDIR=/Users/clovisvinant/.matplotlib
2025-03-18 15:40:46,174 - matplotlib.font_manager - DEBUG - Using fontManager instance from /Users/clovisvinant/.matplotlib/fontlist-v390.json

Loading metrics:   0%|          | 0/2 [00:00<?, ?file/s]
Loading metrics: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 2607.59file/s]
2025-03-18 15:40:52,106 - root - ERROR - Error during execution: 'metrics'
2025-03-18 15:40:52,106 - root - ERROR - Detailed error trace:
Traceback (most recent call last):
  File "/Users/clovisvinant/Central/Projects/scifi/xenarch/main.py", line 144, in main
    analyze_results(output_dir, args)
  File "/Users/clovisvinant/Central/Projects/scifi/xenarch/main.py", line 66, in analyze_results
    analyze_main()
  File "/Users/clovisvinant/Central/Projects/scifi/xenarch/scripts/analyze_results.py", line 179, in main
    filtered_metrics = filter_metrics(all_metrics, conditions)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/clovisvinant/Central/Projects/scifi/xenarch/scripts/analyze_results.py", line 37, in filter_metrics
    value = metric['metrics'].get(key)
            ~~~~~~^^^^^^^^^^^
KeyError: 'metrics'

2025-03-18 15:40:52,273 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:40:52] "[35m[1mPOST /api/upload HTTP/1.1[0m" 500 -
2025-03-18 15:41:29,687 - werkzeug - INFO -  * Detected change in '/Users/clovisvinant/Central/Projects/scifi/xenarch/scripts/analyze_results.py', reloading
2025-03-18 15:41:29,754 - werkzeug - INFO -  * Restarting with stat
2025-03-18 15:41:30,063 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:41:30,069 - werkzeug - WARNING -  * Debugger is active!
2025-03-18 15:41:30,076 - werkzeug - INFO -  * Debugger PIN: 982-295-925
2025-03-18 15:41:54,318 - werkzeug - INFO -  * Detected change in '/Users/clovisvinant/Central/Projects/scifi/xenarch/main.py', reloading
2025-03-18 15:41:54,521 - werkzeug - INFO -  * Restarting with stat
2025-03-18 15:41:54,752 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:41:54,756 - werkzeug - WARNING -  * Debugger is active!
2025-03-18 15:41:54,764 - werkzeug - INFO -  * Debugger PIN: 982-295-925
2025-03-18 15:42:38,576 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:42:38,582 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.1.2:5001
2025-03-18 15:42:38,582 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-18 15:42:38,582 - werkzeug - INFO -  * Restarting with stat
2025-03-18 15:42:38,698 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:42:38,700 - werkzeug - WARNING -  * Debugger is active!
2025-03-18 15:42:38,707 - werkzeug - INFO -  * Debugger PIN: 982-295-925
2025-03-18 15:42:43,037 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:42:43] "GET /api/health HTTP/1.1" 200 -
2025-03-18 15:42:48,267 - __main__ - INFO - Received file upload request
2025-03-18 15:42:48,273 - __main__ - INFO - File saved to /Users/clovisvinant/Central/Projects/scifi/xenarch/uploads/76690573-55d5-4c43-8702-27ac38ab56c6/at3_1m4_01.tif
2025-03-18 15:42:48,273 - __main__ - INFO - Running command: python /Users/clovisvinant/Central/Projects/scifi/xenarch/main.py complete -i /Users/clovisvinant/Central/Projects/scifi/xenarch/uploads/76690573-55d5-4c43-8702-27ac38ab56c6/at3_1m4_01.tif -o /Users/clovisvinant/Central/Projects/scifi/xenarch/analysis_results/76690573-55d5-4c43-8702-27ac38ab56c6 --grid-size 512 --overlap 64 --fd-min 0.0 --fd-max 0.8 --r2-min 0.8 --max-samples 16 --cpu-fraction 0.8 --plot-output /Users/clovisvinant/Central/Projects/scifi/xenarch/analysis_results/76690573-55d5-4c43-8702-27ac38ab56c6 -v
2025-03-18 15:42:50,615 - __main__ - INFO - Command completed successfully: Using 6 CPU cores
Loaded 2 total samples
Found 0 samples meeting conditions

2025-03-18 15:42:50,616 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:42:50] "POST /api/upload HTTP/1.1" 200 -
2025-03-18 15:42:55,634 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:42:55] "GET /api/jobs/76690573-55d5-4c43-8702-27ac38ab56c6/status HTTP/1.1" 200 -
2025-03-18 15:42:55,641 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:42:55] "GET /api/jobs/76690573-55d5-4c43-8702-27ac38ab56c6/results HTTP/1.1" 200 -
2025-03-18 15:42:55,745 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 15:42:55] "GET /api/jobs/76690573-55d5-4c43-8702-27ac38ab56c6/thumbnail/grid_00000_00000 HTTP/1.1" 200 -
2025-03-18 15:44:53,347 - werkzeug - INFO -  * Detected change in '/Users/clovisvinant/Central/Projects/scifi/xenarch/backend/app.py', reloading
2025-03-18 15:44:53,414 - werkzeug - INFO -  * Restarting with stat
2025-03-18 15:44:53,665 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-18 15:44:53,669 - werkzeug - WARNING -  * Debugger is active!
2025-03-18 15:44:53,676 - werkzeug - INFO -  * Debugger PIN: 982-295-925
2025-03-19 00:49:40,137 - dotenv.main - WARNING - Python-dotenv could not parse statement starting at line 1
2025-03-19 00:49:40,140 - werkzeug - WARNING -  * Debugger is active!
2025-03-19 00:49:40,151 - werkzeug - INFO -  * Debugger PIN: 551-761-828
